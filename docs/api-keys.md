<!--
 * @LastEditors: biz
-->
# API 密钥配置指南

本文档提供了如何获取和配置各种 LLM 提供商 API 密钥的详细说明。

## API 密钥获取方式

本系统支持以下两种方式获取 API 密钥：

1. **数据库存储**: 系统会首先从数据库中查找已保存的 API 密钥
2. **环境变量**: 如果数据库中没有找到，系统会从环境变量中读取

## 配置 OpenAI API 密钥

### 获取 OpenAI API 密钥

1. 访问 [OpenAI API 密钥页面](https://platform.openai.com/api-keys)
2. 登录您的 OpenAI 账户
3. 点击 "Create new secret key" 创建新的密钥
4. 为密钥添加描述，然后创建
5. **重要**: 复制并安全保存密钥，因为它只会显示一次

### 配置 OpenAI API 密钥

**方法 1: 通过环境变量设置**

在系统环境变量或 `.env.local` 文件中添加:

```
OPENAI_API_KEY=您的密钥
```

**方法 2: 通过数据库设置**

1. 访问系统的设置页面
2. 前往 "API 密钥" 部分
3. 选择 "OpenAI" 提供商
4. 粘贴您的 API 密钥并保存

## 配置 Deepseek API 密钥

### 获取 Deepseek API 密钥

1. 访问 [Deepseek AI 平台](https://platform.deepseek.com/)
2. 注册并登录您的 Deepseek 账户
3. 在控制台导航到 "API 密钥" 部分
4. 生成新的 API 密钥
5. 复制并安全保存密钥

### 配置 Deepseek API 密钥

**方法 1: 通过环境变量设置**

在系统环境变量或 `.env.local` 文件中添加:

```
DEEPSEEK_API_KEY=您的密钥
```

**方法 2: 通过数据库设置**

1. 访问系统的设置页面
2. 前往 "API 密钥" 部分
3. 选择 "Deepseek" 提供商
4. 粘贴您的 API 密钥并保存

## API 密钥管理

系统会按照以下优先级使用 API 密钥:

1. 用户在数据库中保存的特定密钥
2. 全局默认密钥 (在数据库中存储)
3. 环境变量中的密钥

## 安全建议

- 定期轮换 API 密钥
- 不要在公共代码存储库中硬编码 API 密钥
- 为 API 密钥设置使用限制和预算
- 监控 API 密钥的使用情况，检测异常活动

## 故障排查

如果您遇到与 API 密钥相关的问题:

1. 确保密钥正确且未过期
2. 验证您的账户余额和配额
3. 检查密钥是否有权访问所需的模型
4. 查看系统日志以了解详细的错误信息 